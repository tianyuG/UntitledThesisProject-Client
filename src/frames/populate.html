<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>UTP</title>
    <link rel="stylesheet" href="frames-styles.css" />
  </head>

  <body>
    <h1 id="typ-h1"></h1>
    <div id="typ-intro"></div>
    <div id="typ-gen"></div>

    <script src="../js/core.js"></script>
    <script type="text/javascript">
      const { ipcRenderer } = require("electron");
      var h1El = document.getElementById("typ-h1");
      var introEl = document.getElementById("typ-intro");
      var genEl = document.getElementById("typ-gen");
      var tw1 = null;
      var tw2 = null;
      var tw3 = null;

      ipcRenderer.on("change-tw1", (event, arg) => {
        tw1 = null;
        tw1 = new Typewriter(h1El, {
          loop: false,
          delay: "natural",
          cursor: "⎕",
          devMode: true,
        });
        tw1
          // .stop()
          // .deleteAll(2000)
          .changeCursor("⎕")
          .pauseFor(150)
          .typeString(arg)
          .pauseFor(250)
          .changeCursor(" ")
          .start();
      });
      ipcRenderer.on("change-tw2", (event, arg) => {
        tw2 = null;
        tw2 = new Typewriter(introEl, {
          loop: false,
          delay: "natural",
          cursor: "⎕",
          devMode: true,
        });
        tw2
          // .stop()
          // .deleteAll(2000)
          .changeCursor("⎕")
          .pauseFor(150)
          .typeString(arg)
          .pauseFor(250)
          .changeCursor(" ")
          .start();
      });
      ipcRenderer.on("change-tw3", (event, arg) => {
        tw3 = null;
        tw3 = new Typewriter(genEl, {
          loop: false,
          delay: "natural",
          cursor: "⎕",
          devMode: true,
        });
        tw3
          // .stop()
          // .deleteAll(2000)
          .changeCursor("⎕")
          .pauseFor(150)
          .typeString(arg)
          .pauseFor(250)
          .changeCursor(" ")
          .start();
      });
      ipcRenderer.on("change-tw23", (event, arg) => {
        console.log(arg);
        tw2 = null;
        tw3 = null;
        tw2 = new Typewriter(introEl, {
          loop: false,
          delay: "natural",
          cursor: "⎕",
          devMode: true,
        });
        tw3 = new Typewriter(genEl, {
          loop: false,
          delay: "natural",
          cursor: "⎕",
          devMode: true,
        });
        tw2
          // .stop()
          // .deleteAll(2000)
          .changeCursor("⎕")
          .pauseFor(150)
          .typeString(arg[0])
          .pauseFor(250)
          .changeCursor(" ")
          .callFunction(() => {
            tw3
              .changeCursor("⎕")
              .pauseFor(150)
              .typeString(arg[1])
              .pauseFor(250)
              .changeCursor(" ")
              .start();
          })
          .start();
      });
      // ipcRenderer.on("clear-tw", (event, arg) => {
      //   tw1.stop().deleteAll(2000).start();
      //   tw2.stop().deleteAll(2000).start();
      //   tw3.stop().deleteAll(2000).start();
      // });

      // tw1
      //   .typeString("Article Title")
      //   .pauseFor(500)
      //   .changeCursor(" ")
      //   .callFunction(() => {
      //     tw2
      //       .typeString("Article Starter")
      //       .pauseFor(500)
      //       // .changeCursor(" ")
      //       .start();
      //     tw2
      //       .pauseFor(2000)
      //       .changeCursor("⎕")
      //       .typeString("//Appending to the article starter")
      //       .pauseFor(500)
      //       .changeCursor(" ")
      //       .start();
      //   })
      //   .start();

      // tw3.changeCursor(" ").start();
    </script>
  </body>
</html>
